<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- this stylesheet is for dojo dijit style (claro specifically) -->
    <link
      rel="stylesheet"
      href="http://ajax.googleapis.com/ajax/libs/dojo/1.10.4/dijit/themes/claro/claro.css"
      media="screen"
    />

    <!-- CSS -->
    <style></style>

    <title>SWC</title>
  </head>

  <!-- in order for the dijit style to apply you have to link a class to the body -->
  <body class="claro">
    <button id="btn">Random person name</button>
    <h2 id="header">test</h2>

    <!-- Dojo CDN Script -->
    <!-- http: IMPORTANT -->
    <script
      src="http://ajax.googleapis.com/ajax/libs/dojo/1.14.1/dojo/dojo.js"
      data-dojo-config="has:{'dojo-firebug': true}, parseOnLoad: true, foo: 'bar', async: 1"
    ></script>

    <!-- Dojo Script -->
    <script>
      require([
        "dojo/dom",
        "dojo/on",
        "dojo/request/xhr",
        "dojo/domReady!",
      ], function (dom, on, xhr) {
        var btn = dom.byId("btn");
        var header = dom.byId("header");

        on(btn, "click", function () {
          var num;

          // this loop is to avoid getting #17 since it's not in the api!
          while (true) {
            num = Math.floor(Math.random() * 83) + 1;
            if (num !== 17) break;
          }

          // this block of code will fetch api data and handle it as a json obj
          xhr(`https://swapi.dev/api/people/${num}/`, {
            handleAs: "json",
          }).then(
            function (obj) {
              // do something with the obj
              header.innerHTML = obj.name;
            },
            function (err) {
              // Handle the error condition
              header.innerHTML = "ERR";
            }
          );
        });
      });
    </script>
  </body>
</html>
